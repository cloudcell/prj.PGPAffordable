<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sliding Multi-Select List</title>
<style>
  body {
    margin: 0;
    padding-top: 50px;
    font-family: Arial, sans-serif;
  }

  #toggleLink {
    display: inline-block;
    margin-bottom: 10px;
    cursor: pointer;
  }

  #selectBoxContainer {
    background: #f7f7f7;
    border: 0 solid transparent; /* Initialize border to zero */
    border-radius: 4px;
    width: 300px;
    box-sizing: border-box;
    overflow: hidden;
    max-height: 0;
    padding: 0 10px; /* Initially no vertical padding */
    transition: max-height 0.5s ease, padding 0.5s ease, border 0.5s ease;
  }

  #selectBoxContainer.expanded {
    padding: 10px; /* Add padding when expanded */
    max-height: 600px; /* Arbitrary large max-height to accommodate the content */
    border: 1px solid #ccc; /* Add border when expanded */
  }

  select[multiple] {
    width: 100%;
    height: 200px;
    margin-top: 10px;
  }

  /* Styles for the buttons */
  #select-all, #deselect-all {
    display: inline-block;
    margin-right: 5px;
  }
</style>
</head>
<body>

  <!--centered horizontally-->
<a id="toggleLink">Category Filter</a>
<div style="align-items: center; display: flex; justify-content: center;">
  <div id="selectBoxContainer">
    <button id="select-all" type="button">Select All</button>
    <button id="deselect-all" type="button">Deselect All</button>
    <select name="inp_key_term_classes" multiple>
      <option value="body structure">body structure</option>
      <option value="clinical finding">clinical finding</option>
      <option value="environment">environment</option>
      <option value="geographical location">geographical location</option>
      <option value="event">event</option>
      <option value="observable entity">observable entity</option>
      <option value="organism">organism</option>
      <option value="pharmaceutical product">pharmaceutical product</option>
      <option value="biological product">biological product</option>
      <option value="physical force">physical force</option>
      <option value="physical object">physical object</option>
      <option value="procedure">procedure</option>
      <option value="qualifier value">qualifier value</option>
      <option value="record artifact">record artifact</option>
      <option value="situation">situation</option>
      <option value="metadata">metadata</option>
      <option value="social concept">social concept</option>
      <option value="special concept">special concept</option>
      <option value="specimen">specimen</option>
      <option value="staging scale">staging scale</option>
      <option value="substance">substance</option>
      <option value="miscellaneous">miscellaneous</option>
    </select>
  </div>
</div>

<script>
// This script sets up the toggle functionality for the dropdown
document.getElementById('toggleLink').addEventListener('click', function() {
  var container = document.getElementById('selectBoxContainer');
  container.classList.toggle('expanded');
});

// This script sets up the select/deselect all functionality
document.addEventListener('DOMContentLoaded', function() {
  var multiSelect = document.querySelector('select[multiple]');
  
  document.getElementById('select-all').addEventListener('click', function() {
    Array.from(multiSelect.options).forEach(function(option) {
      option.selected = true;
    });
    multiSelect.dispatchEvent(new Event('change', { 'bubbles': true }));
  });

  document.getElementById('deselect-all').addEventListener('click', function() {
    Array.from(multiSelect.options).forEach(function(option) {
      option.selected = false;
    });
    multiSelect.dispatchEvent(new Event('change', { 'bubbles': true }));
  });

  multiSelect.addEventListener('mousedown', function(e) {
    e.preventDefault();
    var option = e.target;
    if (option.tagName === 'OPTION') {
      option.selected = !option.selected;
      multiSelect.dispatchEvent(new Event('change', { 'bubbles': true }));
    }
  });

  multiSelect.addEventListener('change', function() {
    console.log(Array.from(multiSelect.selectedOptions).map(opt => opt.value));
  });
});
</script>

</body>
</html>
